<!DOCTYPE html>
<html>
    <head>
        <title>ResuMaker</title>
        <link th:href = "@{/css/style.css}" rel = "stylesheet" type = "text/css" />
        <script th:src="@{/js/main.js}" type = "text/javascript"></script>
    </head>

    <body>
        <form id="regForm" action="/submit" method="POST">
        
            <div class="page">
                <h2>Personal Information:</h2>
                    <p><input type="text" placeholder="First Name" required oninput="this.className = ''" id="fname"></p>
                    <p><input type="text" placeholder="Last Name" required oninput="this.className = ''" id="lname"></p>
                    <p><input type="email" placeholder="Email" required oninput="this.className = ''" id="email"></p>
                    <p><input type="tel" placeholder="Phone Number" required oninput="this.className = ''" id="tel"></p>
            </div>

            <div class="page">
                <h2>Education</h2>
                <p><input type="text" placeholder="School Name" required id="school">
                    <input class ="tab"type="text" placeholder="Location" required id="location"></p>
                    <p><input type="text" placeholder="Email" required id = "email">
                    <input class ="tab" type="text" placeholder="Phone Number" required id = "phone"></p>
                    <p><input type="text" placeholder="Start Date - End Date" id = "timeStudied"></p>
                    <p><button type="button" class = "addButton" id = "addEduButton">Add Additional Education</button></p>
            </div>

            <div class="page">
                <h2>Skills</h2>
                <p><input type="text" placeholder="Skill Name" id = "skill">
                    <button type="submit" class = "addButton" id = "addSkillButton">Add Skill</button></p>
            </div>

            <div class="page">
                <h2>Work Experience</h2>
                <p><input type="text" placeholder="Company" required id = "company">
                    <input class ="tab"type="text" placeholder="Location" required id = "location"></p>
                    <p><input type="text" placeholder="Title" required id = "title">
                    <input class ="tab" type="text" placeholder="Start Date-End Date" required id = "timeWorked"></p>
                    <p><input class = "description" type="text" placeholder = "Description" id = "description"></p>
                    <p><button type="button" class = "addButton" id = "addWorkButton">Add Additional Experience</button></p>
            </div>

            <div style="overflow:auto;">
                <div style="float:right;">
                  <button type="button" id="prevBtn" onclick="nextPrev(-1)">Previous</button>
                  <button type="button" id="nextBtn" onclick="nextPrev(1)">Next</button>
                </div>
              </div>

            <div style="text-align:center;margin-top:40px;">
                <span class="step"></span>
                <span class="step"></span>
                <span class="step"></span>
                <span class="step"></span>
            </div>
        </form>
    <script>
        var currentPage = 0;
        showPage(currentPage);
        //
        function showPage(n) {
            var x = document.getElementsByClassName("page");
            x[n].style.display = "block";
            if (n == 0) {
                document.getElementById("prevBtn").style.display = "none";
            } else {
                document.getElementById("prevBtn").style.display = "inline";
            }

            if (n == (x.length - 1)) {
                document.getElementById("nextBtn").innerHTML = "Submit";
            } else {
                document.getElementById("nextBtn").innerHTML = "Next";
            }

            fixStepIndicator(n);
        }

        function nextPrev(n) {
            var x = document.getElementsByClassName("page");
            if (n == 1 && !validateForm()) return false;
            x[currentPage].style.display = "none";
            currentPage = currentPage + n;
            if (currentPage >= x.length) {
                document.getElementById("regForm").submit();
                return false;
            }
            showPage(currentPage);
        }

        function validateForm() {
            // This function deals with validation of the form fields
            var x, y, i, valid = true;
            x = document.getElementsByClassName("page");
            y = x[currentPage].getElementsByTagName("input");
            // A loop that checks every input field in the current tab:
            for (i = 0; i < y.length; i++) {
                // If a field is empty...
                if (y[i].value == "") {
                    // add an "invalid" class to the field:
                    y[i].className += " invalid";
                    // and set the current valid status to false:
                    valid = false;
                }
            }
            // If the valid status is true, mark the step as finished and valid:
            if (valid) {
                document.getElementsByClassName("step")[currentPage].className += " finish";
            }
            return valid; // return the valid status
        }

        function fixStepIndicator(n) {
            // This function removes the "active" class of all steps...
            var i, x = document.getElementsByClassName("step");
            for (i = 0; i < x.length; i++) {
                x[i].className = x[i].className.replace(" active", "");
            }
            //... and adds the "active" class to the current step:
            x[n].className += " active";
        }
        // when new skill is pressed, store prevb
        function payload(){
            const contact = [document.getElementById("fname"), document.getElementById("lname"), 
                             document.getElementById("email"), document.getElementById("tel"),];
            
        }
    </script>
    </body>
</html>